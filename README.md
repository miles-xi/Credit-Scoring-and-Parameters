# Credit-Scoring-and-Parameters

### Executive summary

In this project, we analyzed the Single-Family Loan-Level Dataset from the U.S. Freddie Mac. This extensive dataset consists of two data files, a mortgage application file, and a repayment performance file, and our first objective is to build a behavioral scorecard predicting one-year-ahead default probability for each observation.

We first gained a robust understanding of every variable in the datasets by reading the General User Guide. The response variable, a binary indicator, was created according to the delinquency status in the next 12 months. If a shorter observation window was due to early repayment or reasons arising from default, the corresponding value can still be determined. If there was neither enough observation nor relevant information, the target could not be determined and later the observation was removed.  Useful features were created, such as the rate of change in unpaid balance and the number of times not paying on time but not default. Then two datasets were merged and the joined data set was split into a training set, a test set, and an OOT sample. Finally, missing values in each feature were handled through imputation; if there were a substantial portion of missing values due to unknown reasons, that feature was deleted. Outliers were handled by removing the case or were left as is. The data cleaning procedures were done separately and consistently on two sets.

We binned the remaining features using Weight of Evidence binning, creating a more meaningful interpretation for each feature and introducing non-linearity into the linear model. We used logistic regression with the ElasticNet regularization and trained the model with the 3-fold cross-validation to tune the hyperparameters. The model achieved an ROCAUC score of 0.940 – 0.944 at a 95% confidence level. Given the assumption that each loan could yield a profit margin of 30% of the interest or suffer a 40% loss of the house price, with the predicted probability, we computed the total expected profits of the loans to determine the best cutoff for the loan approval decision-making.

The second task is to develop a time series model of the PD for ratings of loans that have distinct risk profiles from low to high. We obtained a series of breakpoints (which are the False Positive Rate) by approximating the ROC curve of the logistic regression model using piecewise linear functions and mapped these breakpoints to the probability cutoffs, resulting in eight ratings. With these ratings, we put observations in the test set into their corresponding bins and time slots, getting eight time series of the default probability for each state, which was modeled using the SARMIAX model where exogenous variables are macroeconomic factors including the monthly unemployment rate and the House Price Index (HPI) obtained from St Louis Fed. Finally, we obtained the long-run unemployment rate and estimated the HPI to forecast the loan’s performance in the OOT sample using the fitted time series model.

For defaulted loans, we derived their LGD using the features of loss calculation and unpaid balance in the dataset. We performed similar data cleaning procedure to the training, test, and OOT samples and then trained and fine-tuned an XGBoost model to predict LGDs. The model achieved an RMSE of 0.050 on the training and 0.068 on the test set. SHAP were employed to explain the feature importance. Finally, we used to model to predict the LGD on the OOT set and trimmed the predicted values so that they satisfied the Basel III floor of 5%.

